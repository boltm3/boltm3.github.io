<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta
    name="description"
    content="Bolt M3 AI Chat - A smart assistant for Team Bolt.m3 in Kazakhstan."
  />
  <meta name="author" content="Team Bolt.m3" />
  <meta
    name="keywords"
    content="Bolt M3, Robotics, FTC, Kazakhstan, AI Chat"
  />
  <meta name="robots" content="index, follow" />
    <script src="https://cdn.jsdelivr.net/npm/tailwindcss-cdn@3.4.10/tailwindcss.min.js"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <script src="/index.js"></script>
    <link rel="stylesheet" href="/style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@4.12.23/dist/full.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
    rel="icon"
    type="image/svg+xml"
    href="https://boltm3.image.firstinspireskz.org/a.svg"
  />

    <title>Bolt M3 AI Chat</title>
  </head>

  <body class="bg-[#2a2b2d] text-white font-montserrat">
    <nav class="flex items-center justify-between p-6 bg-[#1a1b1d] shadow-md">
      <img
        src="https://boltm3.image.firstinspireskz.org/a.svg"
        alt="Logo"
        class="h-12 hover:scale-105 transition-transform duration-200 ease-in-out"
      />
      <div class="lg:hidden">
        <button class="text-white focus:outline-none" onclick="toggleMenu()">
          <i class="fa fa-bars text-2xl"></i>
        </button>
      </div>
      <ul class="hidden lg:flex space-x-8 text-lg font-semibold">
        <li><a href="/" class="text-white hover:text-red-500">Home</a></li>
        <li><a href="/team" class="text-white hover:text-red-500">Team</a></li>
        <li>
          <a
            href="https://zertte-studio.kz/"
            class="text-lg font-semibold text-white hover:text-red-500"
            >Zertte Studio</a
          >
        </li>
        <li><a href="/chat" class="text-white hover:text-red-500">Chat</a></li>
        <li>
          <a href="/sponsors" class="text-white hover:text-red-500">Sponsors</a>
        </li>
      </ul>
      <div
        id="mobileMenu"
        class="lg:hidden absolute top-16 left-0 w-full bg-[#1a1b1d] text-center hidden"
      >
        <ul class="space-y-4 py-4">
          <li>
            <a href="/" class="text-white hover:text-red-500 block">Home</a>
          </li>
          <li>
            <a href="/team" class="text-white hover:text-red-500 block">Team</a>
          </li>
          <li>
            <a
              href="https://zertte-studio.kz/"
              class="text-white hover:text-red-500 block"
              >Zertte Studio</a
            >
          </li>
          <li>
            <a href="/chat" class="text-white hover:text-red-500 block">Chat</a>
          </li>
          <li>
            <a href="/sponsors" class="text-white hover:text-red-500 block"
              >Sponsor</a
            >
          </li>
        </ul>
      </div>
    </nav>

    <!-- Main Content -->
    <section class="flex flex-col items-center py-16 px-4">
      <!--      <h1 class="text-4xl font-bold mb-6">Bolt M3 AI Chat ğŸ¤–</h1>
            <p class="text-xl mb-12 text-center">
        Chat with our AI ğŸ¤– and get instant responses! ğŸ’¬
      </p>-->

      

      <!-- Chatbox -->
      <div
        id="chatBox"
        class="flex flex-col space-y-4 w-full max-w-lg bg-[#1a1b1d] p-6 rounded-lg shadow-lg h-[400px] overflow-y-auto"
      >
        <!-- Initial AI Message -->
        <div class="chat chat-start">
          <div class="chat-bubble">
            I am the Bolt.m3 bot ğŸ¤–, designed to assist Team Bolt.m3. Please
            tell me your question! ğŸ’¬
          </div>
        </div>
      </div>

      <!-- Input and Button -->
      <div class="flex flex-col items-center w-full max-w-lg mt-8">
        <textarea
          id="inputText"
          placeholder="Enter your message... "
          class="textarea textarea-bordered w-full h-24 bg-[#1a1b1d] text-white mb-4 p-4"
        ></textarea>
        <button
          onclick="sendPostRequest()"
          id="sendButton"
          class="btn btn-primary bg-red-500 hover:bg-red-600 text-white flex items-center gap-2 px-6 py-3 font-semibold rounded-md"
        >
          <i class="fas fa-paper-plane"></i> Send
        </button>
      </div>
    </section>

    <!-- Main Content End -->

    <footer class="bg-[#1a1b1d] p-6 mt-16">
      <div class="flex justify-center items-center mb-8 space-x-16">
        <div class="flex flex-col items-center">
          <img
            src="https://ad2ab94.webp.ee/logo-bigger.webp"
            alt="Bolt.m3 Logo"
            class="h-16 mb-4"
          />
          <div class="flex space-x-4 mb-4">
            <a
              href="https://www.instagram.com/bolt.m3/"
              class="text-white hover:text-red-500"
              ><i class="fab fa-instagram fa-2x"></i
            ></a>
            <a
              href="https://www.tiktok.com/@bolt.m3_ftc"
              class="text-white hover:text-red-500"
              ><i class="fab fa-tiktok fa-2x"></i
            ></a>
            <a
              href="https://www.youtube.com/channel/UCuSTuLznWnVQ2FV-f8L-xHA"
              class="text-white hover:text-red-500"
              ><i class="fab fa-youtube fa-2x"></i
            ></a>
          </div>
        </div>
        <div class="flex flex-col items-start ml-8">
          <a
            href="/team"
            class="text-lg font-semibold text-white hover:text-red-500 mb-2"
            >Team</a
          >
          <a
            href="https://zertte-studio.kz/"
            class="text-lg font-semibold text-white hover:text-red-500 mb-2"
            >Zertte Studio</a
          >
          <a
            href="/chat"
            class="text-lg font-semibold text-white hover:text-red-500 mb-2"
            >Chat</a
          >
          <a
            href="/sponsors"
            class="text-lg font-semibold text-white hover:text-red-500 mb-2"
            >Sponsor</a
          >
        </div>
      </div>
      <div class="flex justify-center items-center">
        <p class="text-lg">Built by Team Bolt.m3</p>
      </div>
    </footer>

    <!-- Script -->
    <script>
      async function sendPostRequest() {
        // è·å–è¾“å…¥æ¡†å’ŒæŒ‰é’®å…ƒç´ 
        const input = document.getElementById("inputText").value;
        const chatBox = document.getElementById("chatBox");
        const sendButton = document.getElementById("sendButton"); // å‡è®¾æŒ‰é’®çš„idæ˜¯sendButton

        // ç¦ç”¨æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»
        sendButton.disabled = true;

        // å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œæ˜¾ç¤ºæç¤ºæ¶ˆæ¯ï¼Œå¹¶åœæ­¢å‘é€è¯·æ±‚
        if (input.trim() === "") {
          chatBox.innerHTML += `
                  <div class="chat chat-start">
                      <div class="chat-bubble">Please enter a message. Your message cannot be empty. ğŸš«</div>
                  </div>
              `;
          chatBox.scrollTop = chatBox.scrollHeight;
          sendButton.disabled = false; // é‡æ–°å¯ç”¨æŒ‰é’®
          return; // é€€å‡ºå‡½æ•°ï¼Œä¸ç»§ç»­æ‰§è¡Œ
        }

        // å¦‚æœè¾“å…¥çš„æ–‡æœ¬ä¸æ˜¯è‹±æ–‡ï¼Œæ˜¾ç¤ºæç¤ºæ¶ˆæ¯ï¼Œå¹¶åœæ­¢å‘é€è¯·æ±‚
        const isEnglish = /^[A-Za-z0-9\s,.'-?!\n\tâ€™]+$/.test(input);

        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æµ‹æ˜¯å¦ä¸ºè‹±è¯­
        if (!isEnglish) {
          chatBox.innerHTML += `
                  <div class="chat chat-start">
                      <div class="chat-bubble">Please write your message in English. ğŸŒ</div>
                  </div>
              `;
          chatBox.scrollTop = chatBox.scrollHeight;
          sendButton.disabled = false; // é‡æ–°å¯ç”¨æŒ‰é’®
          return; // é€€å‡ºå‡½æ•°ï¼Œä¸ç»§ç»­æ‰§è¡Œ
        }

        // å¦‚æœè¾“å…¥æœ‰æ•ˆï¼Œæ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°èŠå¤©æ¡†ï¼ˆchat-endè¡¨ç¤ºç”¨æˆ·æ¶ˆæ¯ï¼‰
        chatBox.innerHTML += `
              <div class="chat chat-end">
                  <div class="chat-bubble">${input} ğŸ—¨ï¸</div>
              </div>
          `;

        // åˆ›å»ºä¸€ä¸ªæ–°çš„divæ¥æ˜¾ç¤ºAIçš„å“åº”ï¼ˆåˆå§‹ä¸ºåŠ è½½çŠ¶æ€ï¼‰
        const responseDiv = document.createElement("div");
        responseDiv.classList.add("chat", "chat-start"); // chat-startè¡¨ç¤ºAIçš„æ¶ˆæ¯
        responseDiv.innerHTML = `<div class="chat-bubble">Loading... <i class="fas fa-spinner fa-spin"></i></div>`;
        chatBox.appendChild(responseDiv); // å°†åŠ è½½çŠ¶æ€æ¶ˆæ¯æ·»åŠ åˆ°èŠå¤©æ¡†

        // æ»šåŠ¨åˆ°èŠå¤©æ¡†çš„æœ€åº•éƒ¨ï¼Œç¡®ä¿æœ€æ–°çš„æ¶ˆæ¯å¯è§
        chatBox.scrollTop = chatBox.scrollHeight;

        try {
          // å‡è®¾ usePostRequest å˜é‡ç”¨äºå†³å®šè¯·æ±‚ç±»å‹
          let usePostRequest = 0; // å¦‚æœè®¾ç½®ä¸º 1 ä½¿ç”¨ POST è¯·æ±‚ï¼Œè®¾ç½®ä¸º 0 ä½¿ç”¨ GET è¯·æ±‚

          let response,result,result_ai;
          if (usePostRequest) {
            // ä½¿ç”¨ POST è¯·æ±‚
            // å‘é€POSTè¯·æ±‚åˆ°åç«¯API
            response = await fetch("https://ai.bolt-m3kz.workers.dev", {
              method: "POST",
              headers: {
                "Content-Type": "application/json", // å‘é€JSONæ ¼å¼çš„æ•°æ®
              },
              body: JSON.stringify({ input: input }), // åŒ…å«ç”¨æˆ·è¾“å…¥çš„JSONè¯·æ±‚ä½“
            });
            console.log(response);
            result_ai = await response.json().output;
            if(result_ai === undefined)
            {
              result="Hello, there was an issue. Please contact the website administrator.";
            }
          } else {
            // ä½¿ç”¨ GET è¯·æ±‚
            response = await fetch(
              `https://rag.api.firstinspireskz.org/?text=${encodeURIComponent(
                input
              )}`,
              {
                method: "GET", // ä½¿ç”¨GETè¯·æ±‚
                headers: {
                  "Content-Type": "application/json", // è®¾ç½®è¯·æ±‚å¤´
                },
              }
            );

            result = await response.text();
          }

          // è§£æå“åº”æ•°æ®ä¸ºçº¯æ–‡æœ¬
          
          console.log("result:", result);

          // æ ¹æ®APIè¿”å›çš„ç»“æœæ›´æ–°AIçš„æ¶ˆæ¯
          responseDiv.innerHTML = `<div class="chat-bubble">${result} ğŸ—£ï¸</div>`;
        } catch (error) {
          // æ•è·ä»»ä½•é”™è¯¯å¹¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
          responseDiv.innerHTML = `<div class="chat-bubble">Error: ${error.message} âŒ</div>`;
        }

        // æ»šåŠ¨åˆ°èŠå¤©æ¡†çš„æœ€åº•éƒ¨ï¼Œç¡®ä¿æœ€æ–°çš„æ¶ˆæ¯å¯è§
        chatBox.scrollTop = chatBox.scrollHeight;

        // é‡æ–°å¯ç”¨æŒ‰é’®
        sendButton.disabled = false;
      }
    </script>
  </body>
</html>
